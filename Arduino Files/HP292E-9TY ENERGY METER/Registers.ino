// GPIO Pins
const int TX_PIN = 17;
const int RX_PIN = 16;
const int DE = 4;
const int RE = 5;
const int DE_RE = 4;

// Defining variables
float Ua = 0, Ub = 0, Uc = 0;                  // Phase Voltages
float Uab = 0, Ubc = 0, Uca = 0;               // RMS Voltages
float Ia = 0, Ib = 0, Ic = 0;                  // Phase Currents
float Pa = 0, Pb = 0, Pc = 0, Pt = 0;          // Active Powers
float Qa = 0, Qb = 0, Qc = 0, Qt = 0;          // Reactive Power
float Sa = 0, Sb = 0, Sc = 0, St = 0;          // Apparent Power
float PFa = 0, PFb = 0, PFc = 0, PFt = 0;      // Power Factor
float bAud = 0;                                // Baud Rate
float FREQ= 0;                                 // Frequency
float THD_Ua = 0, THD_Uc = 0, THD_Uc = 0;      //THD Voltages
float THD_Ia = 0, THD_Ib = 0, THD_Ic = 0;      //THD Current

// Defining buffers
//--------------------------------PHASE VOlTAGRES---------------------------------
//Ua CRC-16 (Modbus)	0x0134
uint8_t sendBuffer_Ua[8] = {0x01, 0x03, 0x00, 0x27, 0x00, 0x01, 0x34, 0x01};
//Ub CRC-16 (Modbus)	0x0204
uint8_t sendBuffer_Ub[8] = {0x01, 0x03, 0x00, 0x28, 0x00, 0x01, 0x04, 0x02};
//Ub CRC-16 (Modbus)	0xC255
uint8_t sendBuffer_Uc[8] = {0x01, 0x03, 0x00, 0x29, 0x00, 0x01, 0x55, 0xC2};


//--------------------------------RMS VOlTAGRES-----------------------------------
//Uab CRC-16 (Modbus)	0xC2A5
uint8_t sendBuffer_Uab[8] = {0x01, 0x03, 0x00, 0x2A, 0x00, 0x01, 0xA5, 0xC2};
//Ubc CRC-16 (Modbus)	0x02F4
uint8_t sendBuffer_Ubc[8] = {0x01, 0x03, 0x00, 0x2B, 0x00, 0x01, 0xF4, 0x02};
//Uca CRC-16 (Modbus)	0xC345
uint8_t sendBuffer_Uca[8] = {0x01, 0x03, 0x00, 0x2C, 0x00, 0x01, 0x45, 0xC3};

//--------------------------------PHASE CURRENTS----------------------------------
//Ia CRC-16 (Modbus)	0x0314
uint8_t sendBuffer_Ia[8] = {0x01, 0x03, 0x00, 0x2D, 0x00, 0x01, 0x14, 0x03};
//Ib CRC-16 (Modbus)	0x03E4
uint8_t sendBuffer_Ib[8] = {0x01, 0x03, 0x00, 0x2E, 0x00, 0x01, 0xE4, 0x03};
//Ic CRC-16 (Modbus)	0xC3B5
uint8_t sendBuffer_Ic[8] = {0x01, 0x03, 0x00, 0x2F, 0x00, 0x01, 0xB5, 0xC3};

//--------------------------------ACTIVE POWERS-----------------------------------
//PA CRC-16 (Modbus)	0x0584
uint8_t sendBuffer_Pa[8] = {0x01, 0x03, 0x00, 0x30, 0x00, 0x01, 0x84, 0x05};
//PB CRC-16 (Modbus)	0xC5D5
uint8_t sendBuffer_Pb[8] = {0x01, 0x03, 0x00, 0x31, 0x00, 0x01, 0xD5, 0xC5};
//PC CRC-16 (Modbus)	0xC525
uint8_t sendBuffer_Pc[8] = {0x01, 0x03, 0x00, 0x32, 0x00, 0x01, 0x25, 0xC5};

//--------------------------------TOTAL ACTIVE POWER-------------------------------
//PT CRC-16 (Modbus)	0x0574
uint8_t sendBuffer_Pt[8] = {0x01, 0x03, 0x00, 0x33, 0x00, 0x01, 0x74, 0x05};

//--------------------------------REACTIVE POWERS---------------------------------
//QA CRC-16 (Modbus)	0xC4C5
uint8_t sendBuffer_Qa[8] = {0x01, 0x03, 0x00, 0x34, 0x00, 0x01, 0xC5, 0xC4};
//QB CRC-16 (Modbus)	0x0494
uint8_t sendBuffer_Qb[8] = {0x01, 0x03, 0x00, 0x35, 0x00, 0x01, 0x94, 0x04};
//QC CRC-16 (Modbus)	0x0464
uint8_t sendBuffer_Qc[8] = {0x01, 0x03, 0x00, 0x36, 0x00, 0x01, 0x64, 0x04};

//--------------------------------TOTAL REACTIVE POWER----------------------------
//QT CRC-16 (Modbus)	0xC435
uint8_t sendBuffer_Qt[8] = {0x01, 0x03, 0x00, 0x37, 0x00, 0x01, 0x35, 0xC4};

//--------------------------------APPARENT POWERS--------------------------------
//SA CRC-16 (Modbus)	0xC705
uint8_t sendBuffer_Sa[8] = {0x01, 0x03, 0x00, 0x38, 0x00, 0x01, 0x05, 0xC7};
//SB CRC-16 (Modbus)	0x0754
uint8_t sendBuffer_Sb[8] = {0x01, 0x03, 0x00, 0x39, 0x00, 0x01, 0x54, 0x07};
//SC CRC-16 (Modbus)	0x07A4
uint8_t sendBuffer_Sc[8] = {0x01, 0x03, 0x00, 0x3A, 0x00, 0x01, 0xA4, 0x07};

//--------------------------------TOTAL APPARENT POWER---------------------------
//ST CRC-16 (Modbus)	0xC7F5
uint8_t sendBuffer_St[8] = {0x01, 0x03, 0x00, 0x3B, 0x00, 0x01, 0xF5, 0xC7};

//--------------------------------PHASE POWER FACTORS-----------------------------
//PFA CRC-16 (Modbus)	0x0644
uint8_t sendBuffer_PFa[8] = {0x01, 0x03, 0x00, 0x3C, 0x00, 0x01, 0x44, 0x06};
//PFB CRC-16 (Modbus)	0xC615
uint8_t sendBuffer_PFb[8] = {0x01, 0x03, 0x00, 0x3D, 0x00, 0x01, 0x15, 0xC6};
//PFC CRC-16 (Modbus)	0xC6E5
uint8_t sendBuffer_PFc[8] = {0x01, 0x03, 0x00, 0x3E, 0x00, 0x01, 0xE5, 0xC6};

//--------------------------------TOTAL PHASE POWER FACTOR------------------------
//PFT CRC-16 (Modbus)	0x06B4
uint8_t sendBuffer_PFt[8] = {0x01, 0x03, 0x00, 0x3F, 0x00, 0x01, 0xB4, 0x06};

//--------------------------------FREQUENCY---------------------------------------
//FREQ CRC-16 (Modbus)	0xDE85
uint8_t sendBuffer_FREQ[8] = {0x01, 0x03, 0x00, 0x40, 0x00, 0x01, 0x85, 0xDE};

//--------------------------------BAUD RATE---------------------------------------
//bAud CRC-16 (Modbus)	0xC075
uint8_t sendBuffer_bAud[8] = {0x01, 0x03, 0x00, 0x23, 0x00, 0x01, 0x75, 0xC0};

//-------------------------------THD(HARMONICS) VOLTAGES---------------------------
//THD_Ua CRC-16 (Modbus)	0x3404
uint8_t sendBuffer_THD_Ua[8] = {0x01, 0x03, 0x01, 0x08, 0x00, 0x01, 0x04, 0x34};
//THD_Ub CRC-16 (Modbus)	0xF455
uint8_t sendBuffer_THD_Ub[8] = {0x01, 0x03, 0x01, 0x09, 0x00, 0x01, 0x55, 0xF4};
//THD_Uc CRC-16 (Modbus)	0xF4A5
uint8_t sendBuffer_THD_Uc[8] = {0x01, 0x03, 0x01, 0x0A, 0x00, 0x01, 0xA5, 0xF4};

//-------------------------------THD(HARMONICS) CURRENTS---------------------------
//THD_Ia CRC-16 (Modbus)	0x34F4
uint8_t sendBuffer_THD_Ia[8] = {0x01, 0x03, 0x01, 0x0B, 0x00, 0x01, 0xF4, 0x34};
//THD_Ib CRC-16 (Modbus)	0xF545
uint8_t sendBuffer_THD_Ib[8] = {0x01, 0x03, 0x01, 0x0C, 0x00, 0x01, 0x45, 0xF5};
//THD_Ic CRC-16 (Modbus)	0x3514
uint8_t sendBuffer_THD_Ic[8] = {0x01, 0x03, 0x01, 0x0D, 0x00, 0x01, 0x14, 0x35};
